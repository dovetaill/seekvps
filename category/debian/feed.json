{
    "version": "https://jsonfeed.org/version/1",
    "title": "VPS探索者 • All posts by \"debian\" category",
    "description": "",
    "home_page_url": "http://www.seekvps.com",
    "items": [
        {
            "id": "http://www.seekvps.com/2024/01/15/pip%E6%8F%90%E7%A4%BAexternally-managed-environment%E6%8A%A5%E9%94%99/",
            "url": "http://www.seekvps.com/2024/01/15/pip%E6%8F%90%E7%A4%BAexternally-managed-environment%E6%8A%A5%E9%94%99/",
            "title": "pip提示externally-managed-environment报错",
            "date_published": "2024-01-15T01:07:14.000Z",
            "content_html": "<h1 id=\"pip提示externally-managed-environment报错\"><a href=\"#pip提示externally-managed-environment报错\" class=\"headerlink\" title=\"pip提示externally-managed-environment报错\"></a>pip提示externally-managed-environment报错</h1><pre class=\"line-numbers language-none\"><code class=\"language-none\">error: externally-managed-environment\n\n× This environment is externally managed\n╰─&gt; To install Python packages system-wide, try apt install\n    python3-xyz, where xyz is the package you are trying to\n    install.\n    \n    If you wish to install a non-Debian-packaged Python package,\n    create a virtual environment using python3 -m venv path&#x2F;to&#x2F;venv.\n    Then use path&#x2F;to&#x2F;venv&#x2F;bin&#x2F;python and path&#x2F;to&#x2F;venv&#x2F;bin&#x2F;pip. Make\n    sure you have python3-full installed.\n    \n    If you wish to install a non-Debian packaged Python application,\n    it may be easiest to use pipx install xyz, which will manage a\n    virtual environment for you. Make sure you have pipx installed.\n    \n    See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;python3.11&#x2F;README.venv for more information.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h1><ol>\n<li>pip添加参数 –break-system-packages</li>\n</ol>\n<p>或者在下列文件添加以下语句 ~&#x2F;.config&#x2F;pip&#x2F;pip.conf:</p>\n<p>[global]<br>break-system-packages &#x3D; true</p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p>直接删除限制文件</p>\n<p>sudo rm &#x2F;usr&#x2F;lib&#x2F;python3.11&#x2F;EXTERNALLY-MANAGED</p>\n",
            "tags": [
                "Debian"
            ]
        },
        {
            "id": "http://www.seekvps.com/2023/09/19/Debian-%E5%8F%8C%E6%A0%88%E7%BD%91%E7%BB%9C%E6%97%B6%E5%BC%80%E5%90%AF-IPv4-IPv6-%E4%BC%98%E5%85%88/",
            "url": "http://www.seekvps.com/2023/09/19/Debian-%E5%8F%8C%E6%A0%88%E7%BD%91%E7%BB%9C%E6%97%B6%E5%BC%80%E5%90%AF-IPv4-IPv6-%E4%BC%98%E5%85%88/",
            "title": "Debian 双栈网络时开启 IPv4/IPv6 优先",
            "date_published": "2023-09-19T03:08:44.000Z",
            "content_html": "<h1 id=\"背景介绍\"><a href=\"#背景介绍\" class=\"headerlink\" title=\"背景介绍\"></a>背景介绍</h1><p>双协议栈技术就是指在一台设备上同时启用 IPv4 协议栈和 IPv6 协议栈，这样就可以同时使用 IPv4 和 IPv6 的网络。</p>\n<p>所有现代化的操作系统和浏览器均会以 IPv6 优先，只有 IPv6 无法访问的时候才会尝试访问 IPv4，某些特定的应用和场景下，我们并不想要 IPv6 优先，这时候就需要修改一些配置文件让 IPv4 优先。</p>\n<h1 id=\"修改-etc-gai-conf\"><a href=\"#修改-etc-gai-conf\" class=\"headerlink\" title=\"修改 &#x2F;etc&#x2F;gai.conf\"></a>修改 &#x2F;etc&#x2F;gai.conf</h1><p>在 Debian 等 Linux 系统下，有一个 &#x2F;etc&#x2F;gai.conf 文件，用于系统的 getaddrinfo 调用，默认情况下，它会使用 IPv6 优先，如果您安装了 curl 并且本地支持 IPv6，那么可以使用 curl ip.sb 测试：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">curl ip<span class=\"token punctuation\">.</span>sb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>效果等同于 curl ip.sb -6</p>\n<p>如果你不想使用 IPv6 优先，可以在这个文件中找到：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">#precedence <span class=\"token operator\">::</span><span class=\"token function\">ffff</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">96</span>  <span class=\"token number\">100</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>取消注释，修改为：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">precedence <span class=\"token operator\">::</span><span class=\"token function\">ffff</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">96</span>  <span class=\"token number\">100</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>一句话命令：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">cat <span class=\"token operator\">></span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>gai<span class=\"token punctuation\">.</span>conf <span class=\"token operator\">&lt;&lt;</span> <span class=\"token constant\">EOF</span>\nprecedence <span class=\"token operator\">::</span><span class=\"token function\">ffff</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">96</span>  <span class=\"token number\">100</span>\n<span class=\"token constant\">EOF</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>或者</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">sed <span class=\"token operator\">-</span>i 's<span class=\"token operator\">/</span>#precedence <span class=\"token operator\">::</span><span class=\"token function\">ffff</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">0</span>\\<span class=\"token operator\">/</span><span class=\"token number\">96</span>  <span class=\"token number\">100</span><span class=\"token operator\">/</span>precedence <span class=\"token operator\">::</span><span class=\"token function\">ffff</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">0</span>\\<span class=\"token operator\">/</span><span class=\"token number\">96</span>  <span class=\"token number\">100</span><span class=\"token operator\">/</span>' <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>gai<span class=\"token punctuation\">.</span>conf<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>此时再使用 curl ip.sb 测试</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">curl ip<span class=\"token punctuation\">.</span>sb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>有时候又会需要强制 IPv6 优先（怎么有些系统和用户那么奇怪？），因为目前 IANA 分配的公网 IPv6 还未进行到 3000:0000::&#x2F;4，所以我们只要把这段之前的 IPv6 加到优先级列表即可，加入这两行 label 的优先级：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">label <span class=\"token number\">2002</span><span class=\"token operator\">::</span><span class=\"token operator\">/</span><span class=\"token number\">16</span>    <span class=\"token number\">1</span>\nlabel <span class=\"token number\">2001</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">::</span><span class=\"token operator\">/</span><span class=\"token number\">32</span>   <span class=\"token number\">1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>一句话命令：</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">cat <span class=\"token operator\">></span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>gai<span class=\"token punctuation\">.</span>conf <span class=\"token operator\">&lt;&lt;</span> <span class=\"token constant\">EOF</span>\nlabel <span class=\"token number\">2002</span><span class=\"token operator\">::</span><span class=\"token operator\">/</span><span class=\"token number\">16</span>    <span class=\"token number\">1</span>\nlabel <span class=\"token number\">2001</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token operator\">::</span><span class=\"token operator\">/</span><span class=\"token number\">32</span>   <span class=\"token number\">1</span>\n<span class=\"token constant\">EOF</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"禁用-IPv6\"><a href=\"#禁用-IPv6\" class=\"headerlink\" title=\"禁用 IPv6\"></a>禁用 IPv6</h1><p>有一些极端情况下，我们可能需要禁止系统的 IPv6 功能，这时候就需要修改 &#x2F;etc&#x2F;sysctl.conf 文件，首先找到你的网卡名称，这里以 eth0 为例，然后加入如下内容</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">net<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>autoconf <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>autoconf <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>accept_ra <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>accept_ra <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>lo<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>eth0<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>如果需要其他网卡则更改或添加 net.ipv6.conf.eth0.disable_ipv6 &#x3D; 1 即可。</p>\n<p>一句话命令</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">cat <span class=\"token operator\">>></span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>sysctl<span class=\"token punctuation\">.</span>conf <span class=\"token operator\">&lt;&lt;</span> <span class=\"token constant\">EOF</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>autoconf <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>autoconf <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>accept_ra <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>accept_ra <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>lo<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nnet<span class=\"token punctuation\">.</span>ipv6<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>eth0<span class=\"token punctuation\">.</span>disable_ipv6 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token constant\">EOF</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>注意 cat 命令后的 &gt;&gt; 即为添加文件内容，如果使用 &gt; 则是覆盖文件内容。</p>\n<p>然后使用 sysctl -p 来重新加载配置文件，此时查看 ip a 就可以发现 IPv6 已经被禁止了。</p>\n",
            "tags": [
                "Debian"
            ]
        }
    ]
}